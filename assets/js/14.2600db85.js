(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{409:function(e,t,o){"use strict";o.r(t);var a=o(56),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"websockets"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#websockets"}},[e._v("#")]),e._v(" Websockets")]),e._v(" "),o("h2",{attrs:{id:"connection-socket-io-client-library"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#connection-socket-io-client-library"}},[e._v("#")]),e._v(" Connection socket.io client (library)")]),e._v(" "),o("ol",[o("li",[e._v("Install library "),o("code",[e._v("yarn add socket.io-client")]),e._v(" or "),o("code",[e._v("npm i socket.io-client")])]),e._v(" "),o("li",[e._v("Use in code")])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("import io from 'socket.io-client'\nconst socketRef = io(SERVER_URL, { query: { roomId } });\nsocketRef.emit('user:add', { username, userId });\nsocketRef.on('users', (data) => {\n    console.log(data)\n});\n")])])]),o("h2",{attrs:{id:"connection-socket-io-client-in-browser"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#connection-socket-io-client-in-browser"}},[e._v("#")]),e._v(" Connection socket.io client (in browser)")]),e._v(" "),o("p",[e._v("in .html")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('<script src="https://cdn.socket.io/4.4.1/socket.io.min.js" integrity="sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H" crossorigin="anonymous"><\/script>\n')])])]),o("p",[e._v("in .js")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('const socket = new WebSocket("ws://localhost:3000");\n\nsocket.onopen = () => {\n  socket.send("Hello!");\n};\n\nsocket.onmessage = (data) => {\n  console.log(data);\n};\n')])])]),o("h2",{attrs:{id:"connection-socket-io-client-module-angular"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#connection-socket-io-client-module-angular"}},[e._v("#")]),e._v(" Connection socket.io client module (Angular)")]),e._v(" "),o("ol",[o("li",[e._v("Install "),o("code",[e._v("npm install ngx-socket-io")]),e._v(" or "),o("code",[e._v("yarn add ngx-socket-io")])]),e._v(" "),o("li",[e._v("Use in code")])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("import { SocketIoModule, SocketIoConfig } from 'ngx-socket-io';\nconst config: SocketIoConfig = { url: 'http://localhost:4444', options: {} };\n// in module\n@NgModule({\n  // ...\n  imports: [\n    // ...\n    SocketIoModule.forRoot(config)\n  ],\n  // ...\n})\n\n//in service\nimport { Injectable } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class YourService {\n  constructor(private socket: Socket) { }\n\n  getDocument(id: string) {\n    this.socket.emit('getDoc', id);\n  }\n\n  newDocument() {\n    this.socket.on('addDoc', (data) => {\n        console.log(data);\n    });\n  }\n}\n")])])]),o("h2",{attrs:{id:"examples-client"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#examples-client"}},[e._v("#")]),e._v(" Examples (client)")]),e._v(" "),o("h3",{attrs:{id:"emit"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#emit"}},[e._v("#")]),e._v(" emit")]),e._v(" "),o("h4",{attrs:{id:"device-error"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#device-error"}},[e._v("#")]),e._v(" device error")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("socket.emit('serverErrorDevice', { message: 'your error message', userId: 'uniqueId' });\n")])])]),o("h4",{attrs:{id:"update-location-if-in-room"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#update-location-if-in-room"}},[e._v("#")]),e._v(" update location if in room")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("socket.emit('serverUpdateLocation', { \n    lat: 'your lat',\n    lon: 'your lon',\n    userId: 'uniqueId',\n });\n")])])]),o("h3",{attrs:{id:"on"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#on"}},[e._v("#")]),e._v(" on")]),e._v(" "),o("h4",{attrs:{id:"connect"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#connect"}},[e._v("#")]),e._v(" connect")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("socket.on('connect', (data) => {\n    console.log(data);\n})\n")])])]),o("h4",{attrs:{id:"user-error-in-your-room"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#user-error-in-your-room"}},[e._v("#")]),e._v(" user error in your room")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("socket.on('clientErrorDevice', (data) => {\n    console.log(data);\n})\n")])])]),o("h4",{attrs:{id:"user-update-location-in-your-room"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#user-update-location-in-your-room"}},[e._v("#")]),e._v(" user update location in your room")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("socket.on('clientUpdateLocation', (data) => {\n    console.log(data);\n})\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);